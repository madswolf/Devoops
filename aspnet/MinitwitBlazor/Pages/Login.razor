@page "/login"
@inject HttpClient http
@using Minitwit.Models.DTO

<h2>Sign In</h2>
  @*add error handling*@
<form action="" method=post onsubmit=@login>
    <dl>
        <dt>Username:</dt>
        <dd><input type=text @bind="@username" @oninput="@((e) => { username=e.Value.ToString();})" name=username size=30></dd>
        <dt>Password:</dt>
        <dd><input type=password @bind="@pwd" @oninput="@((e) => { pwd=e.Value.ToString();})" name=password size=30></dd>
    </dl>
    <div class="actions"><input type=submit value="Sign In"></div>
</form>

@code {
    private string username {get;set;}
    private string pwd {get;set;}

    private async void login(){
        var login = new LoginDTO
        {
            username = username,
            pwd = pwd
        };

        await http.PostAsJsonAsync("/users/login", login);
    }    

}
